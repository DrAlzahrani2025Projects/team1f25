<VirtualHost *:80>
    ServerName sec.cse.csusb.edu:80

    DocumentRoot "/var/www/html/"

    ProxyRequests Off
    ProxyPreserveHost On
    AllowEncodedSlashes NoDecode

    RequestHeader set X-Forwarded-Proto "http"
    RequestHeader set X-Forwarded-Port "80"

    RewriteEngine On

    ########################################
    # Streamlit reverse proxy for team0f25
    ProxyPass        /team0f25 http://localhost:5000/team0f25
    ProxyPassReverse /team0f25 http://localhost:5000/team0f25

    # WebSocket upgrade for Streamlit
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/team0f25/(.*) ws://localhost:5000/team0f25/$1 [P,L]
    ########################################
    # Streamlit reverse proxy for team1f25
    ProxyPass /team1f25 http://localhost:5001/team1f25
    ProxyPassReverse /team1f25 http://localhost:5001/team1f25

    # WebSocket upgrade for Streamlit
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/team1f25/(.*) ws://localhost:5001/team1f25/$1 [P,L]
    ########################################
</VirtualHost>