# HTTPS vhost
Listen 443

<VirtualHost *:443>
  ServerName sec.cse.csusb.edu

  SSLEngine on
  SSLCertificateFile "/usr/local/apache2/certs/server.crt"   # full chain
  SSLCertificateKeyFile "/usr/local/apache2/certs/server.key"

  # Allow proxy to HTTPS backends if needed later
  SSLProxyEngine on
  SSLProxyVerify none
  SSLProxyCheckPeerCN off

  # Forwarded headers for apps behind the proxy
  RequestHeader set X-Forwarded-Proto "https"
  RequestHeader set X-Forwarded-Ssl   "on"

  # Security headers (optional but recommended)
  Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
  Header always set X-Content-Type-Options "nosniff"
  Header always set X-Frame-Options "SAMEORIGIN"
  Header always set Referrer-Policy "no-referrer-when-downgrade"

  # All routes (Jupyter first, then Streamlit)
  Include conf/extra/team1f25.conf
</VirtualHost>
